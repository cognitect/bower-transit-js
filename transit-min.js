// transit-js 0.8.708
// http://transit-format.org
// 
// Copyright 2014 Cognitect. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License..
;(function(){var aa=this;
function ba(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
c&&"undefined"==typeof a.call)return"object";return c}function b(a,c){var d=a.split("."),e=aa;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)d.length||void 0===c?e=e[f]?e[f]:e[f]={}:e[f]=c};function l(a,c){this.B=a|0;this.q=c|0}var ca={};function m(a){if(-128<=a&&128>a){var c=ca[a];if(c)return c}c=new l(a|0,0>a?-1:0);-128<=a&&128>a&&(ca[a]=c);return c}function n(a){return isNaN(a)||!isFinite(a)?p:a<=-da?q:a+1>=da?ea:0>a?s(n(-a)):new l(a%t|0,a/t|0)}function u(a,c){return new l(a,c)}
function v(a,c){if(0==a.length)throw Error("number format error: empty string");var d=c||10;if(2>d||36<d)throw Error("radix out of range: "+d);if("-"==a.charAt(0))return s(v(a.substring(1),d));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);for(var e=n(Math.pow(d,8)),f=p,g=0;g<a.length;g+=8){var h=Math.min(8,a.length-g),k=parseInt(a.substring(g,g+h),d);8>h?(h=n(Math.pow(d,h)),f=f.multiply(h).add(n(k))):(f=f.multiply(e),f=f.add(n(k)))}return f}
var t=4294967296,da=t*t/2,p=m(0),w=m(1),fa=m(-1),ea=u(-1,2147483647),q=u(0,-2147483648),ga=m(16777216);function x(a){return a.q*t+(0<=a.B?a.B:t+a.B)}
l.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(z(this))return"0";if(0>this.q){if(this.l(q)){var c=n(a),d=A(this,c),c=B(d.multiply(c),this);return d.toString(a)+c.B.toString(a)}return"-"+s(this).toString(a)}for(var d=n(Math.pow(a,6)),c=this,e="";;){var f=A(c,d),g=B(c,f.multiply(d)).B.toString(a),c=f;if(z(c))return g+e;for(;6>g.length;)g="0"+g;e=""+g+e}};function z(a){return 0==a.q&&0==a.B}l.prototype.l=function(a){return this.q==a.q&&this.B==a.B};
l.prototype.compare=function(a){if(this.l(a))return 0;var c=0>this.q,d=0>a.q;return c&&!d?-1:!c&&d?1:0>B(this,a).q?-1:1};function s(a){return a.l(q)?q:u(~a.B,~a.q).add(w)}l.prototype.add=function(a){var c=this.q>>>16,d=this.q&65535,e=this.B>>>16,f=a.q>>>16,g=a.q&65535,h=a.B>>>16,k;k=0+((this.B&65535)+(a.B&65535));a=0+(k>>>16);a+=e+h;e=0+(a>>>16);e+=d+g;d=0+(e>>>16);d=d+(c+f)&65535;return u((a&65535)<<16|k&65535,d<<16|e&65535)};function B(a,c){return a.add(s(c))}
l.prototype.multiply=function(a){if(z(this)||z(a))return p;if(this.l(q))return 1==(a.B&1)?q:p;if(a.l(q))return 1==(this.B&1)?q:p;if(0>this.q)return 0>a.q?s(this).multiply(s(a)):s(s(this).multiply(a));if(0>a.q)return s(this.multiply(s(a)));if(0>this.compare(ga)&&0>a.compare(ga))return n(x(this)*x(a));var c=this.q>>>16,d=this.q&65535,e=this.B>>>16,f=this.B&65535,g=a.q>>>16,h=a.q&65535,k=a.B>>>16;a=a.B&65535;var E,r,y,ha;ha=0+f*a;y=0+(ha>>>16);y+=e*a;r=0+(y>>>16);y=(y&65535)+f*k;r+=y>>>16;y&=65535;r+=
d*a;E=0+(r>>>16);r=(r&65535)+e*k;E+=r>>>16;r&=65535;r+=f*h;E+=r>>>16;r&=65535;E=E+(c*a+d*k+e*h+f*g)&65535;return u(y<<16|ha&65535,E<<16|r)};
function A(a,c){if(z(c))throw Error("division by zero");if(z(a))return p;if(a.l(q)){if(c.l(w)||c.l(fa))return q;if(c.l(q))return w;var d;d=1;if(0==d)d=a;else{var e=a.q;d=32>d?u(a.B>>>d|e<<32-d,e>>d):u(e>>d-32,0<=e?0:-1)}d=A(d,c).shiftLeft(1);if(d.l(p))return 0>c.q?w:fa;e=B(a,c.multiply(d));return d.add(A(e,c))}if(c.l(q))return p;if(0>a.q)return 0>c.q?A(s(a),s(c)):s(A(s(a),c));if(0>c.q)return s(A(a,s(c)));for(var f=p,e=a;0<=e.compare(c);){d=Math.max(1,Math.floor(x(e)/x(c)));for(var g=Math.ceil(Math.log(d)/
Math.LN2),g=48>=g?1:Math.pow(2,g-48),h=n(d),k=h.multiply(c);0>k.q||0<k.compare(e);)d-=g,h=n(d),k=h.multiply(c);z(h)&&(h=w);f=f.add(h);e=B(e,k)}return f}l.prototype.shiftLeft=function(a){a&=63;if(0==a)return this;var c=this.B;return 32>a?u(c<<a,this.q<<a|c>>>32-a):u(0,c<<a-32)};function ia(a,c){c&=63;if(0==c)return a;var d=a.q;return 32>c?u(a.B>>>c|d<<32-c,d>>>c):32==c?u(d,0):u(d>>>c-32,0)};var C={h:{}};C.h.R="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){var c=[],d=0,e;for(e in a)c[d++]=e;return c};C.h.isArray="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===ba(a)};C.h.kb=function(a){return Math.round(Math.random()*a)};C.h.s=function(){return C.h.kb(15).toString(16)};
C.h.ra=function(){var a=(8|3&C.h.kb(14)).toString(16);return C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+"-"+C.h.s()+C.h.s()+C.h.s()+C.h.s()+"-4"+C.h.s()+C.h.s()+C.h.s()+"-"+a+C.h.s()+C.h.s()+C.h.s()+"-"+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()+C.h.s()};C.p={};C.p.L="~";C.p.tb="#";C.p.fa="^";C.p.$a="`";C.p.X="~#";C.a={};C.a.l=function(a,c){if(null==a)return null==c;if(a===c)return!0;if("object"===typeof a){if(C.h.isArray(a)){if(C.h.isArray(c)&&a.length===c.length){for(var d=0;d<a.length;d++)if(!C.a.l(a[d],c[d]))return!1;return!0}return!1}if(a.I)return a.I(c);if(null!=c&&"object"===typeof c){if(c.I)return c.I(a);var d=0,e=C.h.R(c).length,f;for(f in a)if(a.hasOwnProperty(f)&&(d++,!c.hasOwnProperty(f)||!C.a.l(a[f],c[f])))return!1;return d===e}}return!1};C.a.Ca=function(a,c){return a^c+2654435769+(a<<6)+(a>>2)};
C.a.Va={};C.a.Wa=0;C.a.sb=256;C.a.Fb=function(a){var c=C.a.Va[a];if(null!=c)return c;for(var d=c=0;d<a.length;++d)c=31*c+a.charCodeAt(d),c%=4294967296;C.a.Wa++;C.a.Wa>=C.a.sb&&(C.a.Va={},C.a.Wa=1);return C.a.Va[a]=c};C.a.U=function(a){var c=0;if(null!=a.forEach)a.forEach(function(a,d){c=(c+(C.a.j(d)^C.a.j(a)))%4503599627370496});else for(var d=C.h.R(a),e=0;e<d.length;e++)var f=d[e],g=a[f],c=(c+(C.a.j(f)^C.a.j(g)))%4503599627370496;return c};
C.a.Ba=function(a){var c=0;if(C.h.isArray(a))for(var d=0;d<a.length;d++)c=C.a.Ca(c,C.a.j(a[d]));else a.forEach&&a.forEach(function(a){c=C.a.Ca(c,C.a.j(a))});return c};C.a.j=function(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":return C.a.Fb(a);default:return a instanceof Date?a.valueOf():C.h.isArray(a)?C.a.Ba(a):a.M?a.M():C.a.U(a)}};C.a.Aa=function(a,c){a.M=c.hashCode;a.I=c.equals;return a};C.types={};function D(a,c){this.tag=a;this.rep=c;this.j=-1}D.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};D.prototype.O=function(a){return C.a.l(this,a)};D.prototype.equiv=D.prototype.O;D.prototype.I=function(a){return a instanceof D?this.tag===a.tag&&C.a.l(this.rep,a.rep):!1};D.prototype.M=function(){-1===this.j&&(this.j=C.a.Ca(C.a.j(this.tag),C.a.j(this.rep)));return this.j};C.types.K=function(a,c){return new D(a,c)};
C.types.Oa=function(a){return a instanceof D};C.types.Zb=function(){return null};C.types.ub=function(a){return"t"===a};C.types.pb=v("9007199254740992");C.types.qb=v("-9007199254740992");C.types.Ea=function(a){if("number"===typeof a||a instanceof l)return a;a=v(a,10);return 0<a.compare(C.types.pb)||0>a.compare(C.types.qb)?a:x(a)};l.prototype.O=function(a){return C.a.l(this,a)};l.prototype.equiv=l.prototype.O;l.prototype.I=function(a){return a instanceof l&&this.l(a)};l.prototype.M=function(){return this.B};
C.types.Ga=function(a){return a instanceof l?!0:"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a)};C.types.Eb=function(a){return parseFloat(a)};C.types.xa=function(a){return C.types.K("n",a)};C.types.gb=function(a){return a instanceof D&&"n"===a.tag};function ja(a){return C.types.K("f",a)}C.types.fb=function(a){return a instanceof D&&"f"===a.tag};C.types.wb=function(a){return a};function F(a){this.name=a;this.j=-1}F.prototype.toString=function(){return":"+this.name};
F.prototype.O=function(a){return C.a.l(this,a)};F.prototype.equiv=F.prototype.O;F.prototype.I=function(a){return a instanceof F&&this.name==a.name};F.prototype.M=function(){-1===this.j&&(this.j=C.a.j(this.name));return this.j};C.types.oa=function(a){return new F(a)};C.types.Ha=function(a){return a instanceof F};function G(a){this.name=a;this.j=-1}G.prototype.toString=function(){return"[Symbol: "+this.name+"]"};G.prototype.O=function(a){return C.a.l(this,a)};G.prototype.equiv=G.prototype.O;
G.prototype.I=function(a){return a instanceof G&&this.name==a.name};G.prototype.M=function(){-1===this.j&&(this.j=C.a.j(this.name));return this.j};C.types.ta=function(a){return new G(a)};C.types.Na=function(a){return a instanceof G};C.types.ia=function(a,c,d){var e="";d=d||c+1;for(var f=8*(7-c),g=m(255).shiftLeft(f);c<d;c++,f-=8,g=ia(g,8)){var h=ia(u(a.B&g.B,a.q&g.q),f).toString(16);1==h.length&&(h="0"+h);e+=h}return e};function H(a,c){this.Da=a;this.Ra=c;this.j=-1}
H.prototype.toString=function(a){var c=this.Da,d=this.Ra;a=""+(C.types.ia(c,0,4)+"-");a+=C.types.ia(c,4,6)+"-";a+=C.types.ia(c,6,8)+"-";a+=C.types.ia(d,0,2)+"-";return a+=C.types.ia(d,2,8)};H.prototype.O=function(a){return C.a.l(this,a)};H.prototype.equiv=H.prototype.O;H.prototype.I=function(a){return a instanceof H&&this.Da.l(a.Da)&&this.Ra.l(a.Ra)};H.prototype.M=function(){-1===this.j&&(this.j=C.a.j(this.toString()));return this.j};
C.types.ka=function(a){a=a.replace(/-/g,"");for(var c=null,d=null,e=d=0,f=24,g=0,g=d=0,f=24;8>g;g+=2,f-=8)d|=parseInt(a.substring(g,g+2),16)<<f;e=0;g=8;for(f=24;16>g;g+=2,f-=8)e|=parseInt(a.substring(g,g+2),16)<<f;c=u(e,d);d=0;g=16;for(f=24;24>g;g+=2,f-=8)d|=parseInt(a.substring(g,g+2),16)<<f;e=0;for(f=g=24;32>g;g+=2,f-=8)e|=parseInt(a.substring(g,g+2),16)<<f;d=u(e,d);return new H(c,d)};C.types.va=function(a){return C.types.ka(a)};C.types.Qa=function(a){return a instanceof H};
C.types.ma=function(a){a="number"===typeof a?a:parseInt(a,10);return new Date(a)};C.types.Rb=function(a){return new Date(a)};Date.prototype.I=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.M=function(){return this.valueOf()};function ka(a){return C.types.K("b",a)}C.types.Fa=function(a){return a instanceof D&&"b"===a.tag};function la(a){return C.types.K("r",a)}C.types.Pa=function(a){return a instanceof D&&"r"===a.tag};C.types.Y=0;C.types.la=1;C.types.Ya=2;
function I(a,c){this.J=a;this.type=c||C.types.Y;this.D=0}I.prototype.next=function(){if(this.D<this.J.length){var a=null,a=this.type===C.types.Y?this.J[this.D]:this.type===C.types.la?this.J[this.D+1]:[this.J[this.D],this.J[this.D+1]],a={value:a,done:!1};this.D+=2;return a}return{value:null,done:!0}};I.prototype.next=I.prototype.next;function J(a,c){this.map=a;this.type=c||C.types.Y;this.keys=ma(this.map);this.D=0;this.T=null;this.Q=0}
J.prototype.next=function(){if(this.D<this.map.size){null!=this.T&&this.Q<this.T.length||(this.T=this.map.map[this.keys[this.D]],this.Q=0);var a=null,a=this.type===C.types.Y?this.T[this.Q]:this.type===C.types.la?this.T[this.Q+1]:[this.T[this.Q],this.T[this.Q+1]],a={value:a,done:!1};this.D++;this.Q+=2;return a}return{value:null,done:!0}};J.prototype.next=J.prototype.next;
C.types.Sa=function(a,c){if((c instanceof K||c instanceof L)&&a.size===c.size){for(var d in a.map)for(var e=a.map[d],f=0;f<e.length;f+=2)if(!C.a.l(e[f+1],c.get(e[f])))return!1;return!0}if(null!=c&&"object"===typeof c&&(d=C.h.R(c),e=d.length,a.size===e)){for(f=0;f<e;f++){var g=d[f];if(!a.P(g)||!C.a.l(c[g],a.get(g)))return!1}return!0}return!1};C.types.wa=8;C.types.Xa=32;C.types.nb=32;function L(a){this.A=a;this.o=null;this.j=-1;this.size=a.length/2;this.ab=0}L.prototype.toString=function(){return"[TransitArrayMap]"};
function na(a){if(a.o)throw Error("Invalid operation, already converted");if(a.size<C.types.wa)return!1;a.ab++;return a.ab>C.types.nb?(a.o=C.types.map(a.A,!1,!0),a.A=[],!0):!1}L.prototype.clear=function(){this.j=-1;this.o?this.o.clear():this.A=[];this.size=0};L.prototype.clear=L.prototype.clear;L.prototype.keys=function(){return this.o?this.o.keys():new I(this.A,C.types.Y)};L.prototype.keys=L.prototype.keys;
L.prototype.V=function(){if(this.o)return this.o.V();for(var a=[],c=0,d=0;d<this.A.length;c++,d+=2)a[c]=this.A[d];return a};L.prototype.keySet=L.prototype.V;L.prototype.J=function(){return this.o?this.o.J():new I(this.A,C.types.Ya)};L.prototype.entries=L.prototype.J;L.prototype.W=function(){return this.o?this.o.W():new I(this.A,C.types.la)};L.prototype.values=L.prototype.W;L.prototype.forEach=function(a){if(this.o)this.o.forEach(a);else for(var c=0;c<this.A.length;c+=2)a(this.A[c+1],this.A[c])};
L.prototype.forEach=L.prototype.forEach;L.prototype.get=function(a){if(this.o)return this.o.get(a);if(na(this))return this.get(a);for(var c=0;c<this.A.length;c+=2)if(C.a.l(this.A[c],a))return this.A[c+1];return null};L.prototype.get=L.prototype.get;L.prototype.P=function(a){if(this.o)return this.o.P(a);if(na(this))return this.P(a);for(var c=0;c<this.A.length;c+=2)if(C.a.l(this.A[c],a))return!0;return!1};L.prototype.has=L.prototype.P;
L.prototype.set=function(a,c){this.j=-1;if(this.o)this.o.set(a,c),this.size=this.o.size;else{for(var d=0;d<this.A.length;d+=2)if(C.a.l(this.A[d],a)){this.A[d+1]=c;return}this.A.push(a);this.A.push(c);this.size++;this.size>C.types.Xa&&(this.o=C.types.map(this.A,!1,!0),this.A=null)}};L.prototype.set=L.prototype.set;
L.prototype["delete"]=function(a){this.j=-1;if(this.o)this.o["delete"](a),this.size=this.o.size;else for(var c=0;c<this.A.length;c+=2)if(C.a.l(this.A[c],a)){this.A.splice(c,2);this.size--;break}};L.prototype.M=function(){if(this.o)return this.o.M();-1===this.j&&(this.j=C.a.U(this));return this.j};L.prototype.I=function(a){return this.o?C.types.Sa(this.o,a):C.types.Sa(this,a)};function K(a,c,d){this.map=c||{};this.Z=a||[];this.size=d||0;this.j=-1}K.prototype.toString=function(){return"[TransitMap]"};
K.prototype.clear=function(){this.j=-1;this.map={};this.Z=[];this.size=0};K.prototype.clear=K.prototype.clear;function ma(a){return null!=a.Z?a.Z:C.h.R(a.map)}K.prototype["delete"]=function(a){this.j=-1;this.Z=null;for(var c=C.a.j(a),d=this.map[c],e=0;e<d.length;e+=2)if(C.a.l(a,d[e])){d.splice(e,2);0===d.length&&delete this.map[c];this.size--;break}};K.prototype.J=function(){return new J(this,C.types.Ya)};K.prototype.entries=K.prototype.J;
K.prototype.forEach=function(a){for(var c=ma(this),d=0;d<c.length;d++)for(var e=this.map[c[d]],f=0;f<e.length;f+=2)a(e[f+1],e[f],this)};K.prototype.forEach=K.prototype.forEach;K.prototype.get=function(a){var c=C.a.j(a),c=this.map[c];if(null!=c)for(var d=0;d<c.length;d+=2){if(C.a.l(a,c[d]))return c[d+1]}else return null};K.prototype.get=K.prototype.get;K.prototype.P=function(a){var c=C.a.j(a),c=this.map[c];if(null!=c)for(var d=0;d<c.length;d+=2)if(C.a.l(a,c[d]))return!0;return!1};K.prototype.has=K.prototype.P;
K.prototype.keys=function(){return new J(this,C.types.Y)};K.prototype.keys=K.prototype.keys;K.prototype.V=function(){for(var a=ma(this),c=[],d=0;d<a.length;d++)for(var e=this.map[a[d]],f=0;f<e.length;f+=2)c.push(e[f]);return c};K.prototype.keySet=K.prototype.V;K.prototype.set=function(a,c){this.j=-1;var d=C.a.j(a),e=this.map[d];if(null==e)this.Z&&this.Z.push(d),this.map[d]=[a,c],this.size++;else{for(var d=!0,f=0;f<e.length;f+=2)if(C.a.l(c,e[f])){d=!1;e[f]=c;break}d&&(e.push(a),e.push(c),this.size++)}};
K.prototype.set=K.prototype.set;K.prototype.W=function(){return new J(this,C.types.la)};K.prototype.values=K.prototype.W;K.prototype.M=function(){-1===this.j&&(this.j=C.a.U(this));return this.j};K.prototype.I=function(a){return C.types.Sa(this,a)};
C.types.map=function(a,c,d){a=a||[];c=!1===c?c:!0;if((!0!==d||!d)&&a.length<=2*C.types.Xa){if(c){var e=a;a=[];for(c=0;c<e.length;c+=2){var f=!1;for(d=0;d<a.length;d+=2)if(C.a.l(a[d],e[c])){a[d+1]=e[c+1];f=!0;break}f||(a.push(e[c]),a.push(e[c+1]))}}return new L(a)}var e={},f=[],g=0;for(c=0;c<a.length;c+=2){d=C.a.j(a[c]);var h=e[d];if(null==h)f.push(d),e[d]=[a[c],a[c+1]],g++;else{var k=!0;for(d=0;d<h.length;d+=2)if(C.a.l(h[d],a[c])){h[d+1]=a[c+1];k=!1;break}k&&(h.push(a[c]),h.push(a[c+1]),g++)}}return new K(f,
e,g)};C.types.Gb=function(a){return a instanceof L};C.types.isMap=function(a){return a instanceof L||a instanceof K};function M(a){this.map=a;this.size=a.size}M.prototype.toString=function(){return"[TransitSet]"};M.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};M.prototype.add=M.prototype.add;M.prototype.clear=function(){this.map=new K;this.size=0};M.prototype.clear=M.prototype.clear;M.prototype["delete"]=function(a){this.map["delete"](a);this.size=this.map.size};
M.prototype.J=function(){return this.map.J()};M.prototype.entries=M.prototype.J;M.prototype.forEach=function(a){var c=this;this.map.forEach(function(d,e){a(e,c)})};M.prototype.forEach=M.prototype.forEach;M.prototype.P=function(a){return this.map.P(a)};M.prototype.has=M.prototype.P;M.prototype.keys=function(){return this.map.keys()};M.prototype.keys=M.prototype.keys;M.prototype.V=function(){return this.map.V()};M.prototype.keySet=M.prototype.V;M.prototype.W=function(){return this.map.W()};
M.prototype.values=M.prototype.W;M.prototype.I=function(a){if(a instanceof M){if(this.size===a.size)return C.a.l(this.map,a.map)}else return!1};M.prototype.M=function(){return C.a.j(this.map)};C.types.set=function(a){a=a||[];for(var c={},d=[],e=0,f=0;f<a.length;f++){var g=C.a.j(a[f]),h=c[g];if(null==h)d.push(g),c[g]=[a[f],a[f]],e++;else{for(var g=!0,k=0;k<h.length;k+=2)if(C.a.l(h[k],a[f])){g=!1;break}g&&(h.push(a[f]),h.push(a[f]),e++)}}return new M(new K(d,c,e))};
C.types.La=function(a){return a instanceof M};C.types.qa=function(a){return C.types.K("'",a)};C.types.Ka=function(a){return a instanceof D&&"'"===a.tag};C.types.list=function(a){return C.types.K("list",a)};C.types.Ja=function(a){return a instanceof C.types.Sb&&"list"===a.tag};C.types.link=function(a){return C.types.K("link",a)};C.types.Ia=function(a){return a instanceof D&&"link"===a.tag};C.v={};C.v.rb=3;C.v.da=48;C.v.ea=44;C.v.Za=C.v.ea*C.v.ea;C.v.ob=4096;C.v.hb=function(a,c){if(a.length>C.v.rb){if(c)return!0;var d=a.charAt(1);return a.charAt(0)===C.p.L?":"===d||"$"===d||"#"===d:!1}return!1};C.v.eb=function(a){var c=Math.floor(a/C.v.ea);a=String.fromCharCode(a%C.v.ea+C.v.da);return 0===c?C.p.fa+a:C.p.fa+String.fromCharCode(c+C.v.da)+a};function oa(){this.vb=this.ha=this.D=0;this.H={}}
oa.prototype.write=function(a,c){if(C.v.hb(a,c)){this.vb===C.v.ob?(this.clear(),this.ha=0,this.H={}):this.D===C.v.Za&&this.clear();var d=this.H[a];return null==d?(this.H[a]=[C.v.eb(this.D),this.ha],this.D++,a):d[1]!=this.ha?(d[1]=this.ha,d[0]=C.v.eb(this.D),this.D++,a):d[0]}return a};oa.prototype.clear=function(){this.D=0;this.ha++};C.v.Hb=function(a){return a.charAt(0)===C.p.fa};C.v.xb=function(a){return 2===a.length?a.charCodeAt(1)-C.v.da:(a.charCodeAt(1)-C.v.da)*C.v.ea+(a.charCodeAt(2)-C.v.da)};
function N(){this.D=0;this.H=[]}N.prototype.write=function(a){this.D==C.v.Za&&(this.D=0);this.H[this.D]=a;this.D++;return a};N.prototype.Ua=function(a){return this.H[C.v.xb(a)]};N.prototype.clear=function(){this.D=0};C.e={};C.e.G={};function pa(a){this.sa=a}C.e.G.tag=function(a){return new pa(a)};C.e.G.ib=function(a){return a&&a instanceof pa};C.e.G.Ib=function(a){switch(a){case "_":case "s":case "?":case "i":case "d":case "b":case "'":case "array":case "map":return!0}return!1};
function O(a){this.options=a||{};this.k={};for(var c in this.na.k)this.k[c]=this.na.k[c];for(c in this.options.handlers){if(C.e.G.Ib(c))throw Error('Cannot override handler for ground type "'+c+'"');this.k[c]=this.options.handlers[c]}this.pa=null!=this.options.preferStrings?this.options.preferStrings:this.na.pa;this.za=this.options.defaultHandler||this.na.za;this.N=this.options.mapBuilder;this.aa=this.options.arrayBuilder}
O.prototype.na={k:{_:function(){return null},"?":function(a){return C.types.ub(a)},b:function(a){return ka(a)},i:function(a){return C.types.Ea(a)},n:function(a){return C.types.xa(a)},d:function(a){return C.types.Eb(a)},f:function(a){return ja(a)},c:function(a){return C.types.wb(a)},":":function(a){return C.types.oa(a)},$:function(a){return C.types.ta(a)},r:function(a){return la(a)},"'":function(a){return a},m:function(a){return C.types.ma(a)},t:function(a){return C.types.Rb(a)},u:function(a){return C.types.va(a)},
set:function(a){return C.types.set(a)},list:function(a){return C.types.list(a)},link:function(a){return C.types.link(a)},cmap:function(a){return C.types.map(a,!1)}},za:function(a,c){return C.types.K(a,c)},pa:!0};
O.prototype.C=function(a,c,d,e){if(null==a)return null;switch(typeof a){case "string":return C.v.hb(a,d)?(a=qa(this,a),c&&c.write(a,d),c=a):c=C.v.Hb(a)?c.Ua(a,d):qa(this,a),c;case "object":if(C.h.isArray(a))if("^ "===a[0])if(this.N)if(a.length<2*C.types.wa+1&&this.N.fromArray){e=[];for(d=1;d<a.length;d+=2)e.push(this.C(a[d],c,!0,!1)),e.push(this.C(a[d+1],c,!1,!1));c=this.N.fromArray(e,a)}else{e=this.N.init(a);for(d=1;d<a.length;d+=2)e=this.N.add(e,this.C(a[d],c,!0,!1),this.C(a[d+1],c,!1,!1),a);c=
this.N.finalize(e,a)}else{e=[];for(d=1;d<a.length;d+=2)e.push(this.C(a[d],c,!0,!1)),e.push(this.C(a[d+1],c,!1,!1));c=C.types.map(e,!1)}else c=ra(this,a,c,e);else{d=C.h.R(a);var f=d[0];e=1==d.length?this.C(f,c,!1,!1):null;if(C.e.G.ib(e))a=a[f],d=this.k[e.sa],c=null!=d?d(this.C(a,c,!1,!0)):C.types.K(e.sa,this.C(a,c,!1,!1));else if(this.N)if(d.length<2*C.types.wa&&this.N.fromArray){var g=[];for(e=0;e<d.length;e++)f=d[e],g.push(this.C(f,c,!0,!1)),g.push(this.C(a[f],c,!1,!1));c=this.N.fromArray(g,a)}else{g=
this.N.init(a);for(e=0;e<d.length;e++)f=d[e],g=this.N.add(g,this.C(f,c,!0,!1),this.C(a[f],c,!1,!1),a);c=this.N.finalize(g,a)}else{g=[];for(e=0;e<d.length;e++)f=d[e],g.push(this.C(f,c,!0,!1)),g.push(this.C(a[f],c,!1,!1));c=C.types.map(g,!1)}}return c}return a};O.prototype.decode=O.prototype.C;
function ra(a,c,d,e){if(e){var f=[];for(e=0;e<c.length;e++)f.push(a.C(c[e],d,!1,!1));return f}if(2===c.length&&"string"===typeof c[0]&&(e=a.C(c[0],d,!1,!1),C.e.G.ib(e)))return c=c[1],f=a.k[e.sa],null!=f?f=f(a.C(c,d,!1,!0)):C.types.K(e.sa,a.C(c,d,!1,!1));if(a.aa){if(32>=c.length&&a.aa.fromArray){f=[];for(e=0;e<c.length;e++)f.push(a.C(c[e],d,!1,!1));return a.aa.fromArray(f,c)}f=a.aa.init();for(e=0;e<c.length;e++)f=a.aa.add(f,a.C(c[e],d,!1,!1),c);return a.aa.finalize(f,c)}f=[];for(e=0;e<c.length;e++)f.push(a.C(c[e],
d,!1,!1));return f}function qa(a,c){if(c.charAt(0)===C.p.L){var d=c.charAt(1);if(d===C.p.L||d===C.p.fa||d===C.p.$a)return c.substring(1);if(d===C.p.tb)return C.e.G.tag(c.substring(2));var e=a.k[d];return null==e?a.za(d,c.substring(2)):e(c.substring(2))}return c}C.e.G.G=function(a){return new O(a)};C.e.lb={};function sa(a){this.G=new O(a)}function P(a,c){this.Pb=a;this.options=c||{};this.H=this.options.cache?this.options.cache:new N}P.prototype.Ua=function(a){var c=this.H;a=this.Pb.G.C(JSON.parse(a),c);this.H.clear();return a};P.prototype.read=P.prototype.Ua;C.k={};C.k.bb=0;C.k.ya="transit$guid$"+C.h.ra();C.k.mb=function(a){if(null==a)return"null";if(a===String)return"string";if(a===Boolean)return"boolean";if(a===Number)return"number";if(a===Array)return"array";if(a===Object)return"map";var c=a[C.k.ya];null==c&&("undefined"!=typeof Object.defineProperty?(c=++C.k.bb,Object.defineProperty(a,C.k.ya,{value:c,enumerable:!1})):a[C.k.ya]=c=++C.k.bb);return c};C.k.constructor=function(a){return null==a?null:a.constructor};
C.k.ba=function(a,c){for(var d=a.toString(),e=d.length;e<c;e++)d="0"+d;return d};C.k.ca=function(a){a=C.h.R(a);for(var c=0;c<a.length;c++);return!0};function Q(){}Q.prototype.tag=function(){return"_"};Q.prototype.rep=function(){return null};Q.prototype.F=function(){return"null"};function R(){}R.prototype.tag=function(){return"s"};R.prototype.rep=function(a){return a};R.prototype.F=function(a){return a};function S(){}S.prototype.tag=function(){return"i"};S.prototype.rep=function(a){return a};
S.prototype.F=function(a){return a.toString()};function T(){}T.prototype.tag=function(){return"i"};T.prototype.rep=function(a){return a.toString()};T.prototype.F=function(a){return a.toString()};function U(){}U.prototype.tag=function(){return"?"};U.prototype.rep=function(a){return a};U.prototype.F=function(a){return a.toString()};function V(){}V.prototype.tag=function(){return"array"};V.prototype.rep=function(a){return a};V.prototype.F=function(){return null};function W(){}W.prototype.tag=function(){return"map"};
W.prototype.rep=function(a){return a};W.prototype.F=function(){return null};function X(){}X.prototype.tag=function(){return"t"};X.prototype.rep=function(a){return a.getUTCFullYear()+"-"+C.k.ba(a.getUTCMonth()+1,2)+"-"+C.k.ba(a.getUTCDate(),2)+"T"+C.k.ba(a.getUTCHours(),2)+":"+C.k.ba(a.getUTCMinutes(),2)+":"+C.k.ba(a.getUTCSeconds(),2)+"."+C.k.ba(a.getUTCMilliseconds(),3)+"Z"};X.prototype.F=function(a,c){return c.rep(a)};function Y(){}Y.prototype.tag=function(){return"m"};Y.prototype.rep=function(a){return a.valueOf()};
Y.prototype.F=function(a){return a.valueOf().toString()};Y.prototype.cb=function(){return new X};function ta(){}ta.prototype.tag=function(){return"u"};ta.prototype.rep=function(a){return a.toString()};ta.prototype.F=function(a){return a.toString()};function ua(){}ua.prototype.tag=function(){return":"};ua.prototype.rep=function(a){return a.name};ua.prototype.F=function(a,c){return c.rep(a)};function va(){}va.prototype.tag=function(){return"$"};va.prototype.rep=function(a){return a.name};
va.prototype.F=function(a,c){return c.rep(a)};function wa(){}wa.prototype.tag=function(a){return a.tag};wa.prototype.rep=function(a){return a.rep};wa.prototype.F=function(){return null};function xa(){}xa.prototype.tag=function(){return"set"};xa.prototype.rep=function(a){var c=[];a.forEach(function(a){c.push(a)});return C.types.K("array",c)};xa.prototype.F=function(){return null};function ya(){}ya.prototype.tag=function(){return"map"};ya.prototype.rep=function(a){return a};ya.prototype.F=function(){return null};
function za(){}za.prototype.tag=function(){return"map"};za.prototype.rep=function(a){return a};za.prototype.F=function(){return null};C.k.yb=function(a){a.set(null,new Q);a.set(String,new R);a.set(Number,new S);a.set(l,new T);a.set(Boolean,new U);a.set(Array,new V);a.set(Object,new W);a.set(Date,new Y);a.set(H,new ta);a.set(F,new ua);a.set(G,new va);a.set(D,new wa);a.set(M,new xa);a.set(L,new ya);a.set(K,new za)};function Aa(){this.k={};C.k.yb(this)}
Aa.prototype.get=function(a){return"string"===typeof a?this.k[a]:this.k[C.k.mb(a)]};C.k.Qb=function(a){switch(a){case "null":case "string":case "boolean":case "number":case "array":case "map":return!1}return!0};Aa.prototype.set=function(a,c){"string"===typeof a&&C.k.Qb(a)?this.k[a]=c:this.k[C.k.mb(a)]=c};C.e.g={};C.e.g.escape=function(a){if(0<a.length){var c=a.charAt(0);return c===C.p.L||c===C.p.fa||c===C.p.$a?C.p.L+a:a}return a};function Ba(a){this.S=a||{};this.pa=null!=this.S.preferStrings?this.S.preferStrings:!0;this.jb=this.S.objectBuilder||null;this.k=new Aa;if(this.S.handlers){var c=this;this.S.handlers.forEach(function(a,e){c.k.set(e,a)})}this.ua=this.S.unpack||function(a){return C.types.Gb(a)&&null===a.o?a.A:!1};this.ja=this.S&&this.S.verbose||!1}
function Ca(a,c){var d=a.k.get(C.k.constructor(c));return null!=d?d:(d=c&&c.transitTag)?a.k.get(d):null}function Z(a,c,d,e,f){a=a+c+d;return f?f.write(a,e):a}C.e.g.Cb=function(a,c,d){var e=[];if(C.h.isArray(c))for(var f=0;f<c.length;f++)e.push(C.e.g.w(a,c[f],!1,d));else c.forEach(function(c){e.push(C.e.g.w(a,c,!1,d))});return e};C.e.g.zb=function(a,c,d){return C.e.g.Cb(a,c,d)};C.e.g.Ma=function(a,c){if("string"!==typeof c){var d=Ca(a,c);return d&&1===d.tag(c).length}return!0};
C.e.g.ca=function(a,c){var d=a.ua(c),e=!0;if(d){for(var f=0;f<d.length&&(e=C.e.g.Ma(a,d[f]),e);f+=2);return e}if(c.keys&&(d=c.keys(),d.next)){for(step=d.next();!step.done;){e=C.e.g.Ma(a,step.value);if(!e)break;step=d.next()}return e}if(c.forEach)return c.forEach(function(c,d){e=e&&C.e.g.Ma(a,d)}),e;throw Error("Cannot walk keys of object type "+C.k.constructor(c).name);};
C.e.g.Bb=function(a,c,d){if(c.constructor===Object||null!=c.forEach){if(a.ja){if(null!=c.forEach)if(C.e.g.ca(a,c)){var e={};c.forEach(function(c,f){e[C.e.g.w(a,f,!0,!1)]=C.e.g.w(a,c,!1,d)})}else{var f=a.ua(c),g=[],h=Z(C.p.X,"cmap","",!0,d);if(f)for(var k=0;k<f.length;k+=2)g.push(C.e.g.w(a,f[k],!0,!1)),g.push(C.e.g.w(a,f[k+1],!1,d));else c.forEach(function(c,e){g.push(C.e.g.w(a,e,!0,!1));g.push(C.e.g.w(a,c,!1,d))});e={};e[h]=g}else for(e={},f=C.h.R(c),k=0;k<f.length;k++)e[C.e.g.w(a,f[k],!0,!1)]=C.e.g.w(a,
c[f[k]],!1,d);return e}if(null!=c.forEach){if(C.e.g.ca(a,c)){f=a.ua(c);e=["^ "];if(f)for(k=0;k<f.length;k+=2)e.push(C.e.g.w(a,f[k],!0,d)),e.push(C.e.g.w(a,f[k+1],!1,d));else c.forEach(function(c,f){e.push(C.e.g.w(a,f,!0,d));e.push(C.e.g.w(a,c,!1,d))});return e}f=a.ua(c);g=[];h=Z(C.p.X,"cmap","",!0,d);if(f)for(k=0;k<f.length;k+=2)g.push(C.e.g.w(a,f[k],!0,d)),g.push(C.e.g.w(a,f[k+1],!1,d));else c.forEach(function(c,e){g.push(C.e.g.w(a,e,!0,d));g.push(C.e.g.w(a,c,!1,d))});return[h,g]}e=["^ "];f=C.h.R(c);
for(k=0;k<f.length;k++)e.push(C.e.g.w(a,f[k],!0,d)),e.push(C.e.g.w(a,c[f[k]],!1,d));return e}if(null!=a.jb)return a.jb(c,function(c){return C.e.g.w(a,c,!0,d)},function(c){return C.e.g.w(a,c,!1,d)});k=C.k.constructor(c).name;f=Error("Cannot write "+k);f.data={Ta:c,type:k};throw f;};C.e.g.Db=function(a,c,d,e){if(a.ja){var f={};f[Z(C.p.X,c,"",!0,e)]=C.e.g.w(a,d,!1,e);return f}return[Z(C.p.X,c,"",!0,e),C.e.g.w(a,d,!1,e)]};
C.e.g.Ab=function(a,c,d,e,f,g,h){if(1===d.length){if("string"===typeof e)return Z(C.p.L,d,e,g,h);if(g||a.pa){(e=a.ja&&c.cb())?(d=e.tag(f),e=e.F(f,e)):e=c.F(f,c);if(null!==e)return Z(C.p.L,d,e,g,h);c=Error('Tag "'+d+'" cannot be encoded as string');c.data={tag:d,rep:e,Ta:f};throw c;}}return C.e.g.Db(a,d,e,h)};
C.e.g.w=function(a,c,d,e){var f=Ca(a,c),g=f?f.tag(c):null,h=f?f.rep(c):null;if(null!=f&&null!=g)switch(g){case "_":return d?Z(C.p.L,"_","",d,e):null;case "s":return Z("","",C.e.g.escape(h),d,e);case "?":return d?Z(C.p.L,"?",h.toString()[0],d,e):h;case "i":return d||"string"===typeof h||h instanceof l?Z(C.p.L,"i",h.toString(),d,e):h;case "d":return d?Z(h.L,"d",h,d,e):h;case "b":return Z(C.p.L,"b",h,d,e);case "'":return a.ja?(c={},d=Z(C.p.X,"'","",!0,e),c[d]=C.e.g.w(a,h,!1,e),a=c):a=[Z(C.p.X,"'","",
!0,e),C.e.g.w(a,h,!1,e)],a;case "array":return C.e.g.zb(a,h,e);case "map":return C.e.g.Bb(a,h,e);default:return C.e.g.Ab(a,f,g,h,c,d,e)}else throw a=C.k.constructor(c).name,e=Error("Cannot write "+a),e.data={Ta:c,type:a},e;};C.e.g.Ob=function(a,c){var d=Ca(a,c);if(null!=d)return 1===d.tag(c).length?C.types.qa(c):c;var d=C.k.constructor(c).name,e=Error("Cannot write "+d);e.data={Ta:c,type:d};throw e;};C.e.g.Mb=function(a,c,d,e){return JSON.stringify(C.e.g.w(a,C.e.g.Ob(a,c),d,e))};
function $(a,c){this.ga=a;this.options=c||{};this.H=!1===this.options.cache?null:this.options.cache?this.options.cache:new oa}$.prototype.Nb=function(){return this.ga};$.prototype.marshaller=$.prototype.Nb;$.prototype.write=function(a,c){var d=null,d=c||{},e=d.asMapKey||!1,f=this.ga.ja?!1:this.H,d=!1===d.marshalTop?C.e.g.w(this.ga,a,e,f):C.e.g.Mb(this.ga,a,e,f);null!=this.H&&this.H.clear();return d};$.prototype.write=$.prototype.write;$.prototype.register=function(a,c){this.ga.k.set(a,c)};
$.prototype.register=$.prototype.register;C.lb=function(a,c){if("json"===a||"json-verbose"===a||null==a){var d=new sa(c);return new P(d,c)}throw Error("Cannot create reader of type "+a);};C.g=function(a,c){if("json"===a||"json-verbose"===a||null==a){"json-verbose"===a&&(null==c&&(c={}),c.verbose=!0);var d=new Ba(c);return new $(d,c)}d=Error('Type must be "json"');d.data={type:a};throw d;};C.Kb=function(a){function c(){}c.prototype.tag=a.tag;c.prototype.rep=a.rep;c.prototype.F=a.stringRep;c.prototype.cb=a.getVerboseHandler;return new c};
C.Jb=function(a){function c(){}c.prototype.init=a.init;c.prototype.add=a.add;c.prototype.finalize=a.finalize;c.prototype.fromArray=a.fromArray;return new c};C.ma=C.types.ma;C.Wb=C.types.Ea;C.Ga=C.types.Ga;C.va=C.types.va;C.Qa=C.types.Qa;C.Ub=C.types.xa;C.Yb=C.types.gb;C.Tb=ja;C.Xb=C.types.fb;C.oa=C.types.oa;C.Ha=C.types.Ha;C.ta=C.types.ta;C.Na=C.types.Na;C.Vb=ka;C.Fa=C.types.Fa;C.uri=la;C.Pa=C.types.Pa;C.map=C.types.map;C.isMap=C.types.isMap;C.set=C.types.set;C.La=C.types.La;C.list=C.types.list;
C.Ja=C.types.Ja;C.qa=C.types.qa;C.Ka=C.types.Ka;C.$b=C.types.K;C.Oa=C.types.Oa;C.link=C.types.link;C.Ia=C.types.Ia;C.hash=C.a.j;C.U=C.a.U;C.U=C.a.Ba;C.l=C.a.l;C.Aa=C.a.Aa;C.Lb=function(a){var c={};a.forEach(function(a,e){if("string"!==typeof e)throw Error("Cannot convert map with non-string keys");c[e]=a});return c};C.G=C.e.G.G;C.ka=C.types.ka;C.ra=C.types.ra;C.ca=C.e.g.ca;b("transit.reader",C.lb);b("transit.writer",C.g);b("transit.makeBuilder",C.Jb);b("transit.makeWriteHandler",C.Kb);
b("transit.date",C.types.ma);b("transit.integer",C.types.Ea);b("transit.isInteger",C.types.Ga);b("transit.uuid",C.types.va);b("transit.isUUID",C.types.Qa);b("transit.bigInt",C.types.xa);b("transit.isBigInt",C.types.gb);b("transit.bigDec",ja);b("transit.isBigDec",C.types.fb);b("transit.keyword",C.types.oa);b("transit.isKeyword",C.types.Ha);b("transit.symbol",C.types.ta);b("transit.isSymbol",C.types.Na);b("transit.binary",ka);b("transit.isBinary",C.types.Fa);b("transit.uri",la);b("transit.isURI",C.types.Pa);
b("transit.map",C.types.map);b("transit.isMap",C.types.isMap);b("transit.set",C.types.set);b("transit.isSet",C.types.La);b("transit.list",C.types.list);b("transit.isList",C.types.Ja);b("transit.quoted",C.types.qa);b("transit.isQuoted",C.types.Ka);b("transit.tagged",C.types.K);b("transit.isTaggedValue",C.types.Oa);b("transit.link",C.types.link);b("transit.isLink",C.types.Ia);b("transit.hash",C.a.j);b("transit.hashMapLike",C.a.U);b("transit.hashArrayLike",C.a.Ba);b("transit.equals",C.a.l);
b("transit.extendToEQ",C.a.Aa);b("transit.mapToObject",C.Lb);b("transit.decoder",C.e.G.G);b("transit.UUIDfromString",C.types.ka);b("transit.randomUUID",C.types.ra);b("transit.stringableKeys",C.e.g.ca);})();
