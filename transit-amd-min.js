// transit-js 0.8.708
// http://transit-format.org
// 
// Copyright 2014 Cognitect. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License..
;(function(){function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};function c(a,b){this.w=a|0;this.o=b|0}var ba={};function l(a){if(-128<=a&&128>a){var b=ba[a];if(b)return b}b=new c(a|0,0>a?-1:0);-128<=a&&128>a&&(ba[a]=b);return b}function m(a){return isNaN(a)||!isFinite(a)?n:a<=-ca?p:a+1>=ca?da:0>a?r(m(-a)):new c(a%s|0,a/s|0)}function t(a,b){return new c(a,b)}
function u(a,b){if(0==a.length)throw Error("number format error: empty string");var d=b||10;if(2>d||36<d)throw Error("radix out of range: "+d);if("-"==a.charAt(0))return r(u(a.substring(1),d));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);for(var e=m(Math.pow(d,8)),f=n,g=0;g<a.length;g+=8){var h=Math.min(8,a.length-g),k=parseInt(a.substring(g,g+h),d);8>h?(h=m(Math.pow(d,h)),f=f.multiply(h).add(m(k))):(f=f.multiply(e),f=f.add(m(k)))}return f}
var s=4294967296,ca=s*s/2,n=l(0),v=l(1),ea=l(-1),da=t(-1,2147483647),p=t(0,-2147483648),fa=l(16777216);function w(a){return a.o*s+(0<=a.w?a.w:s+a.w)}
c.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(y(this))return"0";if(0>this.o){if(this.equals(p)){var b=m(a),d=z(this,b),b=A(d.multiply(b),this);return d.toString(a)+b.w.toString(a)}return"-"+r(this).toString(a)}for(var d=m(Math.pow(a,6)),b=this,e="";;){var f=z(b,d),g=A(b,f.multiply(d)).w.toString(a),b=f;if(y(b))return g+e;for(;6>g.length;)g="0"+g;e=""+g+e}};function y(a){return 0==a.o&&0==a.w}
c.prototype.equals=function(a){return this.o==a.o&&this.w==a.w};c.prototype.compare=function(a){if(this.equals(a))return 0;var b=0>this.o,d=0>a.o;return b&&!d?-1:!b&&d?1:0>A(this,a).o?-1:1};function r(a){return a.equals(p)?p:t(~a.w,~a.o).add(v)}c.prototype.add=function(a){var b=this.o>>>16,d=this.o&65535,e=this.w>>>16,f=a.o>>>16,g=a.o&65535,h=a.w>>>16,k;k=0+((this.w&65535)+(a.w&65535));a=0+(k>>>16);a+=e+h;e=0+(a>>>16);e+=d+g;d=0+(e>>>16);d=d+(b+f)&65535;return t((a&65535)<<16|k&65535,d<<16|e&65535)};
function A(a,b){return a.add(r(b))}
c.prototype.multiply=function(a){if(y(this)||y(a))return n;if(this.equals(p))return 1==(a.w&1)?p:n;if(a.equals(p))return 1==(this.w&1)?p:n;if(0>this.o)return 0>a.o?r(this).multiply(r(a)):r(r(this).multiply(a));if(0>a.o)return r(this.multiply(r(a)));if(0>this.compare(fa)&&0>a.compare(fa))return m(w(this)*w(a));var b=this.o>>>16,d=this.o&65535,e=this.w>>>16,f=this.w&65535,g=a.o>>>16,h=a.o&65535,k=a.w>>>16;a=a.w&65535;var D,q,x,ga;ga=0+f*a;x=0+(ga>>>16);x+=e*a;q=0+(x>>>16);x=(x&65535)+f*k;q+=x>>>16;
x&=65535;q+=d*a;D=0+(q>>>16);q=(q&65535)+e*k;D+=q>>>16;q&=65535;q+=f*h;D+=q>>>16;q&=65535;D=D+(b*a+d*k+e*h+f*g)&65535;return t(x<<16|ga&65535,D<<16|q)};
function z(a,b){if(y(b))throw Error("division by zero");if(y(a))return n;if(a.equals(p)){if(b.equals(v)||b.equals(ea))return p;if(b.equals(p))return v;var d;d=1;if(0==d)d=a;else{var e=a.o;d=32>d?t(a.w>>>d|e<<32-d,e>>d):t(e>>d-32,0<=e?0:-1)}d=z(d,b).shiftLeft(1);if(d.equals(n))return 0>b.o?v:ea;e=A(a,b.multiply(d));return d.add(z(e,b))}if(b.equals(p))return n;if(0>a.o)return 0>b.o?z(r(a),r(b)):r(z(r(a),b));if(0>b.o)return r(z(a,r(b)));for(var f=n,e=a;0<=e.compare(b);){d=Math.max(1,Math.floor(w(e)/
w(b)));for(var g=Math.ceil(Math.log(d)/Math.LN2),g=48>=g?1:Math.pow(2,g-48),h=m(d),k=h.multiply(b);0>k.o||0<k.compare(e);)d-=g,h=m(d),k=h.multiply(b);y(h)&&(h=v);f=f.add(h);e=A(e,k)}return f}c.prototype.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.w;return 32>a?t(b<<a,this.o<<a|b>>>32-a):t(0,b<<a-32)};function ha(a,b){b&=63;if(0==b)return a;var d=a.o;return 32>b?t(a.w>>>b|d<<32-b,d>>>b):32==b?t(d,0):t(d>>>b-32,0)};var B={g:{}};B.g.O="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){var b=[],d=0,e;for(e in a)b[d++]=e;return b};B.g.isArray="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===aa(a)};B.g.Ja=function(a){return Math.round(Math.random()*a)};B.g.p=function(){return B.g.Ja(15).toString(16)};
B.g.randomUUID=function(){var a=(8|3&B.g.Ja(14)).toString(16);return B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+"-"+B.g.p()+B.g.p()+B.g.p()+B.g.p()+"-4"+B.g.p()+B.g.p()+B.g.p()+"-"+a+B.g.p()+B.g.p()+B.g.p()+"-"+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()+B.g.p()};B.l={};B.l.H="~";B.l.Ra="#";B.l.aa="^";B.l.za="`";B.l.T="~#";B.a={};B.a.equals=function(a,b){if(null==a)return null==b;if(a===b)return!0;if("object"===typeof a){if(B.g.isArray(a)){if(B.g.isArray(b)&&a.length===b.length){for(var d=0;d<a.length;d++)if(!B.a.equals(a[d],b[d]))return!1;return!0}return!1}if(a.F)return a.F(b);if(null!=b&&"object"===typeof b){if(b.F)return b.F(a);var d=0,e=B.g.O(b).length,f;for(f in a)if(a.hasOwnProperty(f)&&(d++,!b.hasOwnProperty(f)||!B.a.equals(a[f],b[f])))return!1;return d===e}}return!1};
B.a.na=function(a,b){return a^b+2654435769+(a<<6)+(a>>2)};B.a.ua={};B.a.va=0;B.a.Qa=256;B.a.cb=function(a){var b=B.a.ua[a];if(null!=b)return b;for(var d=b=0;d<a.length;++d)b=31*b+a.charCodeAt(d),b%=4294967296;B.a.va++;B.a.va>=B.a.Qa&&(B.a.ua={},B.a.va=1);return B.a.ua[a]=b};
B.a.hashMapLike=function(a){var b=0;if(null!=a.forEach)a.forEach(function(a,d){b=(b+(B.a.h(d)^B.a.h(a)))%4503599627370496});else for(var d=B.g.O(a),e=0;e<d.length;e++)var f=d[e],g=a[f],b=(b+(B.a.h(f)^B.a.h(g)))%4503599627370496;return b};B.a.hashArrayLike=function(a){var b=0;if(B.g.isArray(a))for(var d=0;d<a.length;d++)b=B.a.na(b,B.a.h(a[d]));else a.forEach&&a.forEach(function(a){b=B.a.na(b,B.a.h(a))});return b};
B.a.h=function(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":return B.a.cb(a);default:return a instanceof Date?a.valueOf():B.g.isArray(a)?B.a.hashArrayLike(a):a.I?a.I():B.a.hashMapLike(a)}};B.a.extendToEQ=function(a,b){a.I=b.hashCode;a.F=b.equals;return a};B.types={};function C(a,b){this.tag=a;this.rep=b;this.h=-1}C.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};C.prototype.L=function(a){return B.a.equals(this,a)};C.prototype.equiv=C.prototype.L;C.prototype.F=function(a){return a instanceof C?this.tag===a.tag&&B.a.equals(this.rep,a.rep):!1};C.prototype.I=function(){-1===this.h&&(this.h=B.a.na(B.a.h(this.tag),B.a.h(this.rep)));return this.h};B.types.K=function(a,b){return new C(a,b)};
B.types.isTaggedValue=function(a){return a instanceof C};B.types.qb=function(){return null};B.types.Sa=function(a){return"t"===a};B.types.Na=u("9007199254740992");B.types.Oa=u("-9007199254740992");B.types.Fa=function(a){if("number"===typeof a||a instanceof c)return a;a=u(a,10);return 0<a.compare(B.types.Na)||0>a.compare(B.types.Oa)?a:w(a)};c.prototype.L=function(a){return B.a.equals(this,a)};c.prototype.equiv=c.prototype.L;c.prototype.F=function(a){return a instanceof c&&this.equals(a)};
c.prototype.I=function(){return this.w};B.types.isInteger=function(a){return a instanceof c?!0:"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a)};B.types.bb=function(a){return parseFloat(a)};B.types.Ba=function(a){return B.types.K("n",a)};B.types.gb=function(a){return a instanceof C&&"n"===a.tag};function ia(a){return B.types.K("f",a)}B.types.fb=function(a){return a instanceof C&&"f"===a.tag};B.types.Ua=function(a){return a};function E(a){this.name=a;this.h=-1}
E.prototype.toString=function(){return":"+this.name};E.prototype.L=function(a){return B.a.equals(this,a)};E.prototype.equiv=E.prototype.L;E.prototype.F=function(a){return a instanceof E&&this.name==a.name};E.prototype.I=function(){-1===this.h&&(this.h=B.a.h(this.name));return this.h};B.types.keyword=function(a){return new E(a)};B.types.isKeyword=function(a){return a instanceof E};function F(a){this.name=a;this.h=-1}F.prototype.toString=function(){return"[Symbol: "+this.name+"]"};
F.prototype.L=function(a){return B.a.equals(this,a)};F.prototype.equiv=F.prototype.L;F.prototype.F=function(a){return a instanceof F&&this.name==a.name};F.prototype.I=function(){-1===this.h&&(this.h=B.a.h(this.name));return this.h};B.types.symbol=function(a){return new F(a)};B.types.isSymbol=function(a){return a instanceof F};
B.types.da=function(a,b,d){var e="";d=d||b+1;for(var f=8*(7-b),g=l(255).shiftLeft(f);b<d;b++,f-=8,g=ha(g,8)){var h=ha(t(a.w&g.w,a.o&g.o),f).toString(16);1==h.length&&(h="0"+h);e+=h}return e};function G(a,b){this.oa=a;this.qa=b;this.h=-1}G.prototype.toString=function(a){var b=this.oa,d=this.qa;a=""+(B.types.da(b,0,4)+"-");a+=B.types.da(b,4,6)+"-";a+=B.types.da(b,6,8)+"-";a+=B.types.da(d,0,2)+"-";return a+=B.types.da(d,2,8)};G.prototype.L=function(a){return B.a.equals(this,a)};G.prototype.equiv=G.prototype.L;
G.prototype.F=function(a){return a instanceof G&&this.oa.equals(a.oa)&&this.qa.equals(a.qa)};G.prototype.I=function(){-1===this.h&&(this.h=B.a.h(this.toString()));return this.h};
B.types.UUIDfromString=function(a){a=a.replace(/-/g,"");for(var b=null,d=null,e=d=0,f=24,g=0,g=d=0,f=24;8>g;g+=2,f-=8)d|=parseInt(a.substring(g,g+2),16)<<f;e=0;g=8;for(f=24;16>g;g+=2,f-=8)e|=parseInt(a.substring(g,g+2),16)<<f;b=t(e,d);d=0;g=16;for(f=24;24>g;g+=2,f-=8)d|=parseInt(a.substring(g,g+2),16)<<f;e=0;for(f=g=24;32>g;g+=2,f-=8)e|=parseInt(a.substring(g,g+2),16)<<f;d=t(e,d);return new G(b,d)};B.types.uuid=function(a){return B.types.UUIDfromString(a)};
B.types.isUUID=function(a){return a instanceof G};B.types.date=function(a){a="number"===typeof a?a:parseInt(a,10);return new Date(a)};B.types.ob=function(a){return new Date(a)};Date.prototype.F=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.I=function(){return this.valueOf()};function ja(a){return B.types.K("b",a)}B.types.isBinary=function(a){return a instanceof C&&"b"===a.tag};function ka(a){return B.types.K("r",a)}
B.types.isURI=function(a){return a instanceof C&&"r"===a.tag};B.types.U=0;B.types.fa=1;B.types.xa=2;function H(a,b){this.G=a;this.type=b||B.types.U;this.B=0}H.prototype.next=function(){if(this.B<this.G.length){var a=null,a=this.type===B.types.U?this.G[this.B]:this.type===B.types.fa?this.G[this.B+1]:[this.G[this.B],this.G[this.B+1]],a={value:a,done:!1};this.B+=2;return a}return{value:null,done:!0}};H.prototype.next=H.prototype.next;
function I(a,b){this.map=a;this.type=b||B.types.U;this.keys=la(this.map);this.B=0;this.Q=null;this.N=0}I.prototype.next=function(){if(this.B<this.map.size){null!=this.Q&&this.N<this.Q.length||(this.Q=this.map.map[this.keys[this.B]],this.N=0);var a=null,a=this.type===B.types.U?this.Q[this.N]:this.type===B.types.fa?this.Q[this.N+1]:[this.Q[this.N],this.Q[this.N+1]],a={value:a,done:!1};this.B++;this.N+=2;return a}return{value:null,done:!0}};I.prototype.next=I.prototype.next;
B.types.ra=function(a,b){if((b instanceof J||b instanceof K)&&a.size===b.size){for(var d in a.map)for(var e=a.map[d],f=0;f<e.length;f+=2)if(!B.a.equals(e[f+1],b.get(e[f])))return!1;return!0}if(null!=b&&"object"===typeof b&&(d=B.g.O(b),e=d.length,a.size===e)){for(f=0;f<e;f++){var g=d[f];if(!a.M(g)||!B.a.equals(b[g],a.get(g)))return!1}return!0}return!1};B.types.ka=8;B.types.wa=32;B.types.La=32;function K(a){this.v=a;this.k=null;this.h=-1;this.size=a.length/2;this.Aa=0}K.prototype.toString=function(){return"[TransitArrayMap]"};
function ma(a){if(a.k)throw Error("Invalid operation, already converted");if(a.size<B.types.ka)return!1;a.Aa++;return a.Aa>B.types.La?(a.k=B.types.map(a.v,!1,!0),a.v=[],!0):!1}K.prototype.clear=function(){this.h=-1;this.k?this.k.clear():this.v=[];this.size=0};K.prototype.clear=K.prototype.clear;K.prototype.keys=function(){return this.k?this.k.keys():new H(this.v,B.types.U)};K.prototype.keys=K.prototype.keys;
K.prototype.R=function(){if(this.k)return this.k.R();for(var a=[],b=0,d=0;d<this.v.length;b++,d+=2)a[b]=this.v[d];return a};K.prototype.keySet=K.prototype.R;K.prototype.G=function(){return this.k?this.k.G():new H(this.v,B.types.xa)};K.prototype.entries=K.prototype.G;K.prototype.S=function(){return this.k?this.k.S():new H(this.v,B.types.fa)};K.prototype.values=K.prototype.S;K.prototype.forEach=function(a){if(this.k)this.k.forEach(a);else for(var b=0;b<this.v.length;b+=2)a(this.v[b+1],this.v[b])};
K.prototype.forEach=K.prototype.forEach;K.prototype.get=function(a){if(this.k)return this.k.get(a);if(ma(this))return this.get(a);for(var b=0;b<this.v.length;b+=2)if(B.a.equals(this.v[b],a))return this.v[b+1];return null};K.prototype.get=K.prototype.get;K.prototype.M=function(a){if(this.k)return this.k.M(a);if(ma(this))return this.M(a);for(var b=0;b<this.v.length;b+=2)if(B.a.equals(this.v[b],a))return!0;return!1};K.prototype.has=K.prototype.M;
K.prototype.set=function(a,b){this.h=-1;if(this.k)this.k.set(a,b),this.size=this.k.size;else{for(var d=0;d<this.v.length;d+=2)if(B.a.equals(this.v[d],a)){this.v[d+1]=b;return}this.v.push(a);this.v.push(b);this.size++;this.size>B.types.wa&&(this.k=B.types.map(this.v,!1,!0),this.v=null)}};K.prototype.set=K.prototype.set;
K.prototype["delete"]=function(a){this.h=-1;if(this.k)this.k["delete"](a),this.size=this.k.size;else for(var b=0;b<this.v.length;b+=2)if(B.a.equals(this.v[b],a)){this.v.splice(b,2);this.size--;break}};K.prototype.I=function(){if(this.k)return this.k.I();-1===this.h&&(this.h=B.a.hashMapLike(this));return this.h};K.prototype.F=function(a){return this.k?B.types.ra(this.k,a):B.types.ra(this,a)};function J(a,b,d){this.map=b||{};this.V=a||[];this.size=d||0;this.h=-1}J.prototype.toString=function(){return"[TransitMap]"};
J.prototype.clear=function(){this.h=-1;this.map={};this.V=[];this.size=0};J.prototype.clear=J.prototype.clear;function la(a){return null!=a.V?a.V:B.g.O(a.map)}J.prototype["delete"]=function(a){this.h=-1;this.V=null;for(var b=B.a.h(a),d=this.map[b],e=0;e<d.length;e+=2)if(B.a.equals(a,d[e])){d.splice(e,2);0===d.length&&delete this.map[b];this.size--;break}};J.prototype.G=function(){return new I(this,B.types.xa)};J.prototype.entries=J.prototype.G;
J.prototype.forEach=function(a){for(var b=la(this),d=0;d<b.length;d++)for(var e=this.map[b[d]],f=0;f<e.length;f+=2)a(e[f+1],e[f],this)};J.prototype.forEach=J.prototype.forEach;J.prototype.get=function(a){var b=B.a.h(a),b=this.map[b];if(null!=b)for(var d=0;d<b.length;d+=2){if(B.a.equals(a,b[d]))return b[d+1]}else return null};J.prototype.get=J.prototype.get;J.prototype.M=function(a){var b=B.a.h(a),b=this.map[b];if(null!=b)for(var d=0;d<b.length;d+=2)if(B.a.equals(a,b[d]))return!0;return!1};
J.prototype.has=J.prototype.M;J.prototype.keys=function(){return new I(this,B.types.U)};J.prototype.keys=J.prototype.keys;J.prototype.R=function(){for(var a=la(this),b=[],d=0;d<a.length;d++)for(var e=this.map[a[d]],f=0;f<e.length;f+=2)b.push(e[f]);return b};J.prototype.keySet=J.prototype.R;
J.prototype.set=function(a,b){this.h=-1;var d=B.a.h(a),e=this.map[d];if(null==e)this.V&&this.V.push(d),this.map[d]=[a,b],this.size++;else{for(var d=!0,f=0;f<e.length;f+=2)if(B.a.equals(b,e[f])){d=!1;e[f]=b;break}d&&(e.push(a),e.push(b),this.size++)}};J.prototype.set=J.prototype.set;J.prototype.S=function(){return new I(this,B.types.fa)};J.prototype.values=J.prototype.S;J.prototype.I=function(){-1===this.h&&(this.h=B.a.hashMapLike(this));return this.h};
J.prototype.F=function(a){return B.types.ra(this,a)};
B.types.map=function(a,b,d){a=a||[];b=!1===b?b:!0;if((!0!==d||!d)&&a.length<=2*B.types.wa){if(b){var e=a;a=[];for(b=0;b<e.length;b+=2){var f=!1;for(d=0;d<a.length;d+=2)if(B.a.equals(a[d],e[b])){a[d+1]=e[b+1];f=!0;break}f||(a.push(e[b]),a.push(e[b+1]))}}return new K(a)}var e={},f=[],g=0;for(b=0;b<a.length;b+=2){d=B.a.h(a[b]);var h=e[d];if(null==h)f.push(d),e[d]=[a[b],a[b+1]],g++;else{var k=!0;for(d=0;d<h.length;d+=2)if(B.a.equals(h[d],a[b])){h[d+1]=a[b+1];k=!1;break}k&&(h.push(a[b]),h.push(a[b+1]),
g++)}}return new J(f,e,g)};B.types.eb=function(a){return a instanceof K};B.types.isMap=function(a){return a instanceof K||a instanceof J};function L(a){this.map=a;this.size=a.size}L.prototype.toString=function(){return"[TransitSet]"};L.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};L.prototype.add=L.prototype.add;L.prototype.clear=function(){this.map=new J;this.size=0};L.prototype.clear=L.prototype.clear;L.prototype["delete"]=function(a){this.map["delete"](a);this.size=this.map.size};
L.prototype.G=function(){return this.map.G()};L.prototype.entries=L.prototype.G;L.prototype.forEach=function(a){var b=this;this.map.forEach(function(d,e){a(e,b)})};L.prototype.forEach=L.prototype.forEach;L.prototype.M=function(a){return this.map.M(a)};L.prototype.has=L.prototype.M;L.prototype.keys=function(){return this.map.keys()};L.prototype.keys=L.prototype.keys;L.prototype.R=function(){return this.map.R()};L.prototype.keySet=L.prototype.R;L.prototype.S=function(){return this.map.S()};
L.prototype.values=L.prototype.S;L.prototype.F=function(a){if(a instanceof L){if(this.size===a.size)return B.a.equals(this.map,a.map)}else return!1};L.prototype.I=function(){return B.a.h(this.map)};B.types.set=function(a){a=a||[];for(var b={},d=[],e=0,f=0;f<a.length;f++){var g=B.a.h(a[f]),h=b[g];if(null==h)d.push(g),b[g]=[a[f],a[f]],e++;else{for(var g=!0,k=0;k<h.length;k+=2)if(B.a.equals(h[k],a[f])){g=!1;break}g&&(h.push(a[f]),h.push(a[f]),e++)}}return new L(new J(d,b,e))};
B.types.isSet=function(a){return a instanceof L};B.types.quoted=function(a){return B.types.K("'",a)};B.types.isQuoted=function(a){return a instanceof C&&"'"===a.tag};B.types.list=function(a){return B.types.K("list",a)};B.types.isList=function(a){return a instanceof B.types.pb&&"list"===a.tag};B.types.link=function(a){return B.types.K("link",a)};B.types.isLink=function(a){return a instanceof C&&"link"===a.tag};B.q={};B.q.Pa=3;B.q.Y=48;B.q.Z=44;B.q.ya=B.q.Z*B.q.Z;B.q.Ma=4096;B.q.Ga=function(a,b){if(a.length>B.q.Pa){if(b)return!0;var d=a.charAt(1);return a.charAt(0)===B.l.H?":"===d||"$"===d||"#"===d:!1}return!1};B.q.Ea=function(a){var b=Math.floor(a/B.q.Z);a=String.fromCharCode(a%B.q.Z+B.q.Y);return 0===b?B.l.aa+a:B.l.aa+String.fromCharCode(b+B.q.Y)+a};function na(){this.Ta=this.ca=this.B=0;this.D={}}
na.prototype.write=function(a,b){if(B.q.Ga(a,b)){this.Ta===B.q.Ma?(this.clear(),this.ca=0,this.D={}):this.B===B.q.ya&&this.clear();var d=this.D[a];return null==d?(this.D[a]=[B.q.Ea(this.B),this.ca],this.B++,a):d[1]!=this.ca?(d[1]=this.ca,d[0]=B.q.Ea(this.B),this.B++,a):d[0]}return a};na.prototype.clear=function(){this.B=0;this.ca++};B.q.hb=function(a){return a.charAt(0)===B.l.aa};B.q.Va=function(a){return 2===a.length?a.charCodeAt(1)-B.q.Y:(a.charCodeAt(1)-B.q.Y)*B.q.Z+(a.charCodeAt(2)-B.q.Y)};
function M(){this.B=0;this.D=[]}M.prototype.write=function(a){this.B==B.q.ya&&(this.B=0);this.D[this.B]=a;this.B++;return a};M.prototype.ta=function(a){return this.D[B.q.Va(a)]};M.prototype.clear=function(){this.B=0};B.e={};B.e.decoder={};function oa(a){this.ia=a}B.e.decoder.tag=function(a){return new oa(a)};B.e.decoder.Ha=function(a){return a&&a instanceof oa};B.e.decoder.ib=function(a){switch(a){case "_":case "s":case "?":case "i":case "d":case "b":case "'":case "array":case "map":return!0}return!1};
function N(a){this.options=a||{};this.j={};for(var b in this.ga.j)this.j[b]=this.ga.j[b];for(b in this.options.handlers){if(B.e.decoder.ib(b))throw Error('Cannot override handler for ground type "'+b+'"');this.j[b]=this.options.handlers[b]}this.ha=null!=this.options.preferStrings?this.options.preferStrings:this.ga.ha;this.ma=this.options.defaultHandler||this.ga.ma;this.J=this.options.mapBuilder;this.W=this.options.arrayBuilder}
N.prototype.ga={j:{_:function(){return null},"?":function(a){return B.types.Sa(a)},b:function(a){return ja(a)},i:function(a){return B.types.Fa(a)},n:function(a){return B.types.Ba(a)},d:function(a){return B.types.bb(a)},f:function(a){return ia(a)},c:function(a){return B.types.Ua(a)},":":function(a){return B.types.keyword(a)},$:function(a){return B.types.symbol(a)},r:function(a){return ka(a)},"'":function(a){return a},m:function(a){return B.types.date(a)},t:function(a){return B.types.ob(a)},u:function(a){return B.types.uuid(a)},
set:function(a){return B.types.set(a)},list:function(a){return B.types.list(a)},link:function(a){return B.types.link(a)},cmap:function(a){return B.types.map(a,!1)}},ma:function(a,b){return B.types.K(a,b)},ha:!0};
N.prototype.A=function(a,b,d,e){if(null==a)return null;switch(typeof a){case "string":return B.q.Ga(a,d)?(a=pa(this,a),b&&b.write(a,d),b=a):b=B.q.hb(a)?b.ta(a,d):pa(this,a),b;case "object":if(B.g.isArray(a))if("^ "===a[0])if(this.J)if(a.length<2*B.types.ka+1&&this.J.fromArray){e=[];for(d=1;d<a.length;d+=2)e.push(this.A(a[d],b,!0,!1)),e.push(this.A(a[d+1],b,!1,!1));b=this.J.fromArray(e,a)}else{e=this.J.init(a);for(d=1;d<a.length;d+=2)e=this.J.add(e,this.A(a[d],b,!0,!1),this.A(a[d+1],b,!1,!1),a);b=
this.J.finalize(e,a)}else{e=[];for(d=1;d<a.length;d+=2)e.push(this.A(a[d],b,!0,!1)),e.push(this.A(a[d+1],b,!1,!1));b=B.types.map(e,!1)}else b=qa(this,a,b,e);else{d=B.g.O(a);var f=d[0];e=1==d.length?this.A(f,b,!1,!1):null;if(B.e.decoder.Ha(e))a=a[f],d=this.j[e.ia],b=null!=d?d(this.A(a,b,!1,!0)):B.types.K(e.ia,this.A(a,b,!1,!1));else if(this.J)if(d.length<2*B.types.ka&&this.J.fromArray){var g=[];for(e=0;e<d.length;e++)f=d[e],g.push(this.A(f,b,!0,!1)),g.push(this.A(a[f],b,!1,!1));b=this.J.fromArray(g,
a)}else{g=this.J.init(a);for(e=0;e<d.length;e++)f=d[e],g=this.J.add(g,this.A(f,b,!0,!1),this.A(a[f],b,!1,!1),a);b=this.J.finalize(g,a)}else{g=[];for(e=0;e<d.length;e++)f=d[e],g.push(this.A(f,b,!0,!1)),g.push(this.A(a[f],b,!1,!1));b=B.types.map(g,!1)}}return b}return a};N.prototype.decode=N.prototype.A;
function qa(a,b,d,e){if(e){var f=[];for(e=0;e<b.length;e++)f.push(a.A(b[e],d,!1,!1));return f}if(2===b.length&&"string"===typeof b[0]&&(e=a.A(b[0],d,!1,!1),B.e.decoder.Ha(e)))return b=b[1],f=a.j[e.ia],null!=f?f=f(a.A(b,d,!1,!0)):B.types.K(e.ia,a.A(b,d,!1,!1));if(a.W){if(32>=b.length&&a.W.fromArray){f=[];for(e=0;e<b.length;e++)f.push(a.A(b[e],d,!1,!1));return a.W.fromArray(f,b)}f=a.W.init();for(e=0;e<b.length;e++)f=a.W.add(f,a.A(b[e],d,!1,!1),b);return a.W.finalize(f,b)}f=[];for(e=0;e<b.length;e++)f.push(a.A(b[e],
d,!1,!1));return f}function pa(a,b){if(b.charAt(0)===B.l.H){var d=b.charAt(1);if(d===B.l.H||d===B.l.aa||d===B.l.za)return b.substring(1);if(d===B.l.Ra)return B.e.decoder.tag(b.substring(2));var e=a.j[d];return null==e?a.ma(d,b.substring(2)):e(b.substring(2))}return b}B.e.decoder.decoder=function(a){return new N(a)};B.e.reader={};function ra(a){this.decoder=new N(a)}function O(a,b){this.mb=a;this.options=b||{};this.D=this.options.cache?this.options.cache:new M}O.prototype.ta=function(a){var b=this.D;a=this.mb.decoder.A(JSON.parse(a),b);this.D.clear();return a};O.prototype.read=O.prototype.ta;B.j={};B.j.Ca=0;B.j.la="transit$guid$"+B.g.randomUUID();B.j.Ka=function(a){if(null==a)return"null";if(a===String)return"string";if(a===Boolean)return"boolean";if(a===Number)return"number";if(a===Array)return"array";if(a===Object)return"map";var b=a[B.j.la];null==b&&("undefined"!=typeof Object.defineProperty?(b=++B.j.Ca,Object.defineProperty(a,B.j.la,{value:b,enumerable:!1})):a[B.j.la]=b=++B.j.Ca);return b};B.j.constructor=function(a){return null==a?null:a.constructor};
B.j.X=function(a,b){for(var d=a.toString(),e=d.length;e<b;e++)d="0"+d;return d};B.j.stringableKeys=function(a){a=B.g.O(a);for(var b=0;b<a.length;b++);return!0};function P(){}P.prototype.tag=function(){return"_"};P.prototype.rep=function(){return null};P.prototype.C=function(){return"null"};function Q(){}Q.prototype.tag=function(){return"s"};Q.prototype.rep=function(a){return a};Q.prototype.C=function(a){return a};function R(){}R.prototype.tag=function(){return"i"};R.prototype.rep=function(a){return a};
R.prototype.C=function(a){return a.toString()};function S(){}S.prototype.tag=function(){return"i"};S.prototype.rep=function(a){return a.toString()};S.prototype.C=function(a){return a.toString()};function T(){}T.prototype.tag=function(){return"?"};T.prototype.rep=function(a){return a};T.prototype.C=function(a){return a.toString()};function U(){}U.prototype.tag=function(){return"array"};U.prototype.rep=function(a){return a};U.prototype.C=function(){return null};function V(){}V.prototype.tag=function(){return"map"};
V.prototype.rep=function(a){return a};V.prototype.C=function(){return null};function W(){}W.prototype.tag=function(){return"t"};W.prototype.rep=function(a){return a.getUTCFullYear()+"-"+B.j.X(a.getUTCMonth()+1,2)+"-"+B.j.X(a.getUTCDate(),2)+"T"+B.j.X(a.getUTCHours(),2)+":"+B.j.X(a.getUTCMinutes(),2)+":"+B.j.X(a.getUTCSeconds(),2)+"."+B.j.X(a.getUTCMilliseconds(),3)+"Z"};W.prototype.C=function(a,b){return b.rep(a)};function X(){}X.prototype.tag=function(){return"m"};X.prototype.rep=function(a){return a.valueOf()};
X.prototype.C=function(a){return a.valueOf().toString()};X.prototype.Da=function(){return new W};function Y(){}Y.prototype.tag=function(){return"u"};Y.prototype.rep=function(a){return a.toString()};Y.prototype.C=function(a){return a.toString()};function sa(){}sa.prototype.tag=function(){return":"};sa.prototype.rep=function(a){return a.name};sa.prototype.C=function(a,b){return b.rep(a)};function ta(){}ta.prototype.tag=function(){return"$"};ta.prototype.rep=function(a){return a.name};
ta.prototype.C=function(a,b){return b.rep(a)};function ua(){}ua.prototype.tag=function(a){return a.tag};ua.prototype.rep=function(a){return a.rep};ua.prototype.C=function(){return null};function va(){}va.prototype.tag=function(){return"set"};va.prototype.rep=function(a){var b=[];a.forEach(function(a){b.push(a)});return B.types.K("array",b)};va.prototype.C=function(){return null};function wa(){}wa.prototype.tag=function(){return"map"};wa.prototype.rep=function(a){return a};wa.prototype.C=function(){return null};
function xa(){}xa.prototype.tag=function(){return"map"};xa.prototype.rep=function(a){return a};xa.prototype.C=function(){return null};B.j.Wa=function(a){a.set(null,new P);a.set(String,new Q);a.set(Number,new R);a.set(c,new S);a.set(Boolean,new T);a.set(Array,new U);a.set(Object,new V);a.set(Date,new X);a.set(G,new Y);a.set(E,new sa);a.set(F,new ta);a.set(C,new ua);a.set(L,new va);a.set(K,new wa);a.set(J,new xa)};function ya(){this.j={};B.j.Wa(this)}
ya.prototype.get=function(a){return"string"===typeof a?this.j[a]:this.j[B.j.Ka(a)]};B.j.nb=function(a){switch(a){case "null":case "string":case "boolean":case "number":case "array":case "map":return!1}return!0};ya.prototype.set=function(a,b){"string"===typeof a&&B.j.nb(a)?this.j[a]=b:this.j[B.j.Ka(a)]=b};B.e.writer={};B.e.writer.escape=function(a){if(0<a.length){var b=a.charAt(0);return b===B.l.H||b===B.l.aa||b===B.l.za?B.l.H+a:a}return a};function za(a){this.P=a||{};this.ha=null!=this.P.preferStrings?this.P.preferStrings:!0;this.Ia=this.P.objectBuilder||null;this.j=new ya;if(this.P.handlers){var b=this;this.P.handlers.forEach(function(a,e){b.j.set(e,a)})}this.ja=this.P.unpack||function(a){return B.types.eb(a)&&null===a.k?a.v:!1};this.ea=this.P&&this.P.verbose||!1}
function Aa(a,b){var d=a.j.get(B.j.constructor(b));return null!=d?d:(d=b&&b.transitTag)?a.j.get(d):null}function Z(a,b,d,e,f){a=a+b+d;return f?f.write(a,e):a}B.e.writer.$a=function(a,b,d){var e=[];if(B.g.isArray(b))for(var f=0;f<b.length;f++)e.push(B.e.writer.s(a,b[f],!1,d));else b.forEach(function(b){e.push(B.e.writer.s(a,b,!1,d))});return e};B.e.writer.Xa=function(a,b,d){return B.e.writer.$a(a,b,d)};B.e.writer.pa=function(a,b){if("string"!==typeof b){var d=Aa(a,b);return d&&1===d.tag(b).length}return!0};
B.e.writer.stringableKeys=function(a,b){var d=a.ja(b),e=!0;if(d){for(var f=0;f<d.length&&(e=B.e.writer.pa(a,d[f]),e);f+=2);return e}if(b.keys&&(d=b.keys(),d.next)){for(step=d.next();!step.done;){e=B.e.writer.pa(a,step.value);if(!e)break;step=d.next()}return e}if(b.forEach)return b.forEach(function(b,d){e=e&&B.e.writer.pa(a,d)}),e;throw Error("Cannot walk keys of object type "+B.j.constructor(b).name);};
B.e.writer.Za=function(a,b,d){if(b.constructor===Object||null!=b.forEach){if(a.ea){if(null!=b.forEach)if(B.e.writer.stringableKeys(a,b)){var e={};b.forEach(function(b,f){e[B.e.writer.s(a,f,!0,!1)]=B.e.writer.s(a,b,!1,d)})}else{var f=a.ja(b),g=[],h=Z(B.l.T,"cmap","",!0,d);if(f)for(var k=0;k<f.length;k+=2)g.push(B.e.writer.s(a,f[k],!0,!1)),g.push(B.e.writer.s(a,f[k+1],!1,d));else b.forEach(function(b,e){g.push(B.e.writer.s(a,e,!0,!1));g.push(B.e.writer.s(a,b,!1,d))});e={};e[h]=g}else for(e={},f=B.g.O(b),
k=0;k<f.length;k++)e[B.e.writer.s(a,f[k],!0,!1)]=B.e.writer.s(a,b[f[k]],!1,d);return e}if(null!=b.forEach){if(B.e.writer.stringableKeys(a,b)){f=a.ja(b);e=["^ "];if(f)for(k=0;k<f.length;k+=2)e.push(B.e.writer.s(a,f[k],!0,d)),e.push(B.e.writer.s(a,f[k+1],!1,d));else b.forEach(function(b,f){e.push(B.e.writer.s(a,f,!0,d));e.push(B.e.writer.s(a,b,!1,d))});return e}f=a.ja(b);g=[];h=Z(B.l.T,"cmap","",!0,d);if(f)for(k=0;k<f.length;k+=2)g.push(B.e.writer.s(a,f[k],!0,d)),g.push(B.e.writer.s(a,f[k+1],!1,d));
else b.forEach(function(b,e){g.push(B.e.writer.s(a,e,!0,d));g.push(B.e.writer.s(a,b,!1,d))});return[h,g]}e=["^ "];f=B.g.O(b);for(k=0;k<f.length;k++)e.push(B.e.writer.s(a,f[k],!0,d)),e.push(B.e.writer.s(a,b[f[k]],!1,d));return e}if(null!=a.Ia)return a.Ia(b,function(b){return B.e.writer.s(a,b,!0,d)},function(b){return B.e.writer.s(a,b,!1,d)});k=B.j.constructor(b).name;f=Error("Cannot write "+k);f.data={sa:b,type:k};throw f;};
B.e.writer.ab=function(a,b,d,e){if(a.ea){var f={};f[Z(B.l.T,b,"",!0,e)]=B.e.writer.s(a,d,!1,e);return f}return[Z(B.l.T,b,"",!0,e),B.e.writer.s(a,d,!1,e)]};B.e.writer.Ya=function(a,b,d,e,f,g,h){if(1===d.length){if("string"===typeof e)return Z(B.l.H,d,e,g,h);if(g||a.ha){(e=a.ea&&b.Da())?(d=e.tag(f),e=e.C(f,e)):e=b.C(f,b);if(null!==e)return Z(B.l.H,d,e,g,h);b=Error('Tag "'+d+'" cannot be encoded as string');b.data={tag:d,rep:e,sa:f};throw b;}}return B.e.writer.ab(a,d,e,h)};
B.e.writer.s=function(a,b,d,e){var f=Aa(a,b),g=f?f.tag(b):null,h=f?f.rep(b):null;if(null!=f&&null!=g)switch(g){case "_":return d?Z(B.l.H,"_","",d,e):null;case "s":return Z("","",B.e.writer.escape(h),d,e);case "?":return d?Z(B.l.H,"?",h.toString()[0],d,e):h;case "i":return d||"string"===typeof h||h instanceof c?Z(B.l.H,"i",h.toString(),d,e):h;case "d":return d?Z(h.H,"d",h,d,e):h;case "b":return Z(B.l.H,"b",h,d,e);case "'":return a.ea?(b={},d=Z(B.l.T,"'","",!0,e),b[d]=B.e.writer.s(a,h,!1,e),a=b):a=
[Z(B.l.T,"'","",!0,e),B.e.writer.s(a,h,!1,e)],a;case "array":return B.e.writer.Xa(a,h,e);case "map":return B.e.writer.Za(a,h,e);default:return B.e.writer.Ya(a,f,g,h,b,d,e)}else throw a=B.j.constructor(b).name,e=Error("Cannot write "+a),e.data={sa:b,type:a},e;};B.e.writer.lb=function(a,b){var d=Aa(a,b);if(null!=d)return 1===d.tag(b).length?B.types.quoted(b):b;var d=B.j.constructor(b).name,e=Error("Cannot write "+d);e.data={sa:b,type:d};throw e;};
B.e.writer.jb=function(a,b,d,e){return JSON.stringify(B.e.writer.s(a,B.e.writer.lb(a,b),d,e))};function $(a,b){this.ba=a;this.options=b||{};this.D=!1===this.options.cache?null:this.options.cache?this.options.cache:new na}$.prototype.kb=function(){return this.ba};$.prototype.marshaller=$.prototype.kb;$.prototype.write=function(a,b){var d=null,d=b||{},e=d.asMapKey||!1,f=this.ba.ea?!1:this.D,d=!1===d.marshalTop?B.e.writer.s(this.ba,a,e,f):B.e.writer.jb(this.ba,a,e,f);null!=this.D&&this.D.clear();return d};
$.prototype.write=$.prototype.write;$.prototype.register=function(a,b){this.ba.j.set(a,b)};$.prototype.register=$.prototype.register;B.reader=function(a,b){if("json"===a||"json-verbose"===a||null==a){var d=new ra(b);return new O(d,b)}throw Error("Cannot create reader of type "+a);};B.writer=function(a,b){if("json"===a||"json-verbose"===a||null==a){"json-verbose"===a&&(null==b&&(b={}),b.verbose=!0);var d=new za(b);return new $(d,b)}d=Error('Type must be "json"');d.data={type:a};throw d;};
B.makeWriteHandler=function(a){function b(){}b.prototype.tag=a.tag;b.prototype.rep=a.rep;b.prototype.C=a.stringRep;b.prototype.Da=a.getVerboseHandler;return new b};B.makeBuilder=function(a){function b(){}b.prototype.init=a.init;b.prototype.add=a.add;b.prototype.finalize=a.finalize;b.prototype.fromArray=a.fromArray;return new b};B.date=B.types.date;B.integer=B.types.Fa;B.isInteger=B.types.isInteger;B.uuid=B.types.uuid;B.isUUID=B.types.isUUID;B.bigInt=B.types.Ba;B.isBigInt=B.types.gb;B.bigDec=ia;
B.isBigDec=B.types.fb;B.keyword=B.types.keyword;B.isKeyword=B.types.isKeyword;B.symbol=B.types.symbol;B.isSymbol=B.types.isSymbol;B.binary=ja;B.isBinary=B.types.isBinary;B.uri=ka;B.isURI=B.types.isURI;B.map=B.types.map;B.isMap=B.types.isMap;B.set=B.types.set;B.isSet=B.types.isSet;B.list=B.types.list;B.isList=B.types.isList;B.quoted=B.types.quoted;B.isQuoted=B.types.isQuoted;B.tagged=B.types.K;B.isTaggedValue=B.types.isTaggedValue;B.link=B.types.link;B.isLink=B.types.isLink;B.hash=B.a.h;
B.hashMapLike=B.a.hashMapLike;B.hashMapLike=B.a.hashArrayLike;B.equals=B.a.equals;B.extendToEQ=B.a.extendToEQ;B.mapToObject=function(a){var b={};a.forEach(function(a,e){if("string"!==typeof e)throw Error("Cannot convert map with non-string keys");b[e]=a});return b};B.decoder=B.e.decoder.decoder;B.UUIDfromString=B.types.UUIDfromString;B.randomUUID=B.types.randomUUID;B.stringableKeys=B.e.writer.stringableKeys;define("transit",[],function(){return B});})();
